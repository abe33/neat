// Generated by CoffeeScript 1.3.3
(function() {
  var JASMINE, Neat, error, green, info, neatTask, path, puts, red, run, yellow, _ref, _ref1;

  path = require('path');

  Neat = require('../neat');

  _ref = require('../utils/commands'), run = _ref.run, neatTask = _ref.neatTask;

  _ref1 = require('../utils/logs'), error = _ref1.error, info = _ref1.info, green = _ref1.green, red = _ref1.red, yellow = _ref1.yellow, puts = _ref1.puts;

  JASMINE = './node_modules/.bin/jasmine-node';

  exports.test = neatTask({
    name: 'test',
    description: 'Tests the sources',
    action: function(callback) {
      var msg;
      if (!path.existsSync(JASMINE)) {
        msg = "" + (red("Can't find jasmine-node module")) + "\n\nRun " + (yellow('neat install')) + " to install the dependencies.";
        return error(msg);
      }
      return Neat.task('compile')(function(status) {
        var args;
        if (status === 0) {
          args = ['.', '--color', '--coffee', '--test-dir', "" + Neat.root + "/test/spec"];
          return run(JASMINE, args, callback);
        } else {
          puts;

          return typeof callback === "function" ? callback() : void 0;
        }
      });
    }
  });

}).call(this);
